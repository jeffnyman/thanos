#!/usr/bin/env ruby

def hasGem(command)
  exts = ENV['PATHEXT'] ? ENV['PATHEXT'].split(';') : ['']
  ENV['PATH'].split(File::PATH_SEPARATOR).each do |path|
    exts.each { |ext|
      exe = File.join(path, "#{command}#{ext}")
      return true if File.executable?(exe) && !File.directory?(exe)
    }
  end

  begin
    require command
    return true
  rescue Exception => exception
    return false
  end
end

if ARGV[0] == '--help' || ARGV[0] == '-h'
  puts "Look for other gems on https://rubygems.org/"
  puts "For TL;DR version check https://thanosjs.org/"
  puts ""
  puts "Commands"
  puts "  snap-fingers          Do the snap"
  puts "  -wg, --with-glove     Put on the Infinity Gauntlet"
  puts "  -h,  --help           Show this message and quit"
  return
end

if !(hasGem('power') && hasGem('reality') && hasGem('mind') && hasGem('space') && hasGem('time') && hasGem('soul'))
  puts "I still need to look for other gems!?"
  return
end

if ARGV[0] == 'snap-fingers' && (ARGV[1] == '-wg' || ARGV[1] == '--with-glove')
  puts "
@@@@@@@@@@@@@@@@@@@@@@@@&@@@@@@@%@@@@&&%@(.%&,,/,,,@#&&&/.#..%@@#@@@&@@@@@@@@@@
@@@@@@@@&%#@/(&@@@@@@@@@@##/%@@@%@#%@&(((,.%&.    #&@&%%@&/&&@@@@@@@@@@@@@@@@@%
@@@@@&********&##@@@@@@@@((&&&&&&@&* # &( #( #% ( *(&%&@@&&@#@@@@@@@@@@@@@@@@&@
&@@@%*********(#(*@@@@@@%*&#%%&@%#(#&&(@,%&@.%,&&&#&%,&&@&@&@@@@@@@@&/&&@@&&@@@
&@@@#**********%%**@@@@@@@@@@&@@@@@%.*@&%#* ,&@,* *@@@@@@@@@@@@@@@@@(,@@@@@@%#@
&@&@#**********&(/,%@@@@(@@@@@&&&@@@@@@&%&(&%@&(@#*@@@@@@&@&@@@@@@@@@@@@@@@&@@@
@@@@/***///****&(%,#@@@@@@@@@@@@@@@@@@#(%##@&/ %@@@@@*@@@@@@@@@@@@@@@@@@&.,@@@@
@@@%&@#/,,,,,,*%%*,/@@@@@@@@@@@@@@@@@@@@@@@@(%&@@&@@@@@@@@@@@@@@@@@@@@%&@@@@@@@
@@&*,,,,*////*,*,*&&@@@@@@@@@@@@@@@@@@@@.  * /##& .@@@@@@@@@&&@@@@@@@@@##@@@@@@
@@(&%&/*(%&&&%#/,,,&@@@@@@@@@@@@@@@&@@. .   *#& (@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@
/&@%%#*********#/@#*@@@@@@@@@@@&@@@@@@@@@%#.,,*%@@& /@@@@@@@@@@@@@@@@@@@@@@@@@@
#*#************%(*(#@@@@@@@@@@@@@@@@@@@@@@@@*@@@/#@@@@@@@@@%*/@@@@@@@@@@@@@@@@@
/#*************#*,,@@@@@@@@@@@@@@@@@@@@@@@@& (@@*@&@@@@@@/,&(******/&@@@@@@@@@@
@#*****(&&#*****/(&@@@@@@@@@@@/,,,,,,/@#@@@&@@@@@&#(*,&#*%#**********#@@@@@@@@@
@%**%@/,,,,,*,,,*%@#&@@@@@@@%(*/&@#,,,,#%*,,,,,,*#&%&%,%%************&@@@@@@@@@
@@&#,,,,,*&(,*&%*/@&,&@@,,,,,,,,*(#@#,,,%&/(####***&//@(************/@@@@@@@@@@
@&*,,,,,/@&,,#(**#(,#@*,/%&*##%%/***(%,,,#%*******&*&%**************&@@@@@@@@@@
@*,,,,,,/@@,,%*****#,*@#,,,#&********#,,,/&******&(&%**************/@@@@@@@@@@@
@#,,,,,,,*&%,%******(%,(@*,,,&*********,,*@*****%#%&***************%@@@@@@@@@@@
@@&/,,,,,#@*,#********&/,&&,,,&/*****((,,(&****/&*%%**/#&%#//(%&&#/&@@@@@@@@@@@
@@@@@@(,,,&*,*#********((,*@/,/&*****%*,*&(****&(,*%#*,,,,,,,,,,,,#@@@@@@@@@@@@
@@@@&(@@*,,&*,#/*******/#,,(@*,%****/#,,&/*****@%@/*,,,,,,,,,,,,,,,/@@@@@@@@@@@
@@@@@@@@@*,*&/,(/********##,%&,%***&*,(@##%&#&@&%&*#(/*****&%*,,,,,,*@@@@@@@@@@
@@@@@@@&*&*,,##*/%********#,,#@&%@@&@@@@.%(.@@@%,,&@&&@%,,*&@%,,,,,,#@@&@@@@@@@
@@@@@@@/(*@*,,,,,,(@&(*****((,/(@@@@@@@@@@@&@#@@&(&%****%&,*&&,,,,,%@@@@(/&@@@@
@@@@@@%(,,/@*,,/%%%/,/&%*///*&,,*%@@@@@@@@@@@&&@@@(%******&*,*@*,,,@@@@@@@@@@@&
@@@@@@/(,,/@@/#,,,,,,(/,%%***&&*,,,/%,@@@@@@@@@@@@/#*******%(,/&,,,@@@@@@@@@/#@
@@@@@@*,,,/%/@/,,,,,,,,(**&******%(,,,,*/##,%@@&&(/(********##*&*,,@@@@@@@@@@@@
@&/%%&##&#,##/(,,,,,,,,,/(/#**********/////****#*********(/**%*#/,,#@@@@@@@@@@@
#,*&//////#(/#&,,,,,,,,,,%,&************/%&%#/#**********(#**/(/#,,*@@@@@@@@@@@
*,(#///////(%,&&*,,,,,,,,#*&********((#(//(*(#***********/#***#,&,,,%@@@@&&@@@@
*,(#/////////%*%#@#,,,,,%#/#***********//****************%/***&,&*,,,&@@@@@@@@@
*,*&//////////%//**//%@%/&%*****************************%%/***&,%,,,,,&@@@@@@@@
&&@@&/////////%,%*************************************#(#%****&*#,,*//**@@@@@@@
%%%%&@&(//////#,%*************************************#******/%&*/@%((#%@@@@@@@
%%%%%%%*&#@%(,*&/*************************************/******(@##%((//((((&@@@@
%%%%%%&#(#****************************************************@*&(/(((((/((&@@@
%%%%%%%&(#***/%***********************************************&,&((((((/((/(&@@
@&%%%%&*&******(**********************************************&*%((((((//(/(%@@
#%#@@%&#******************************************************#%*%(//(((((/(%@@
##%#&#%%/******************************************************/#,%(((/(/(((&@@
##&@**(&#&/******/%%%%&#****************************************(@/#%(/(/(#@(/@
//******//&/****(@####%%,%%***************************************(@&*(#%%@/*%@
*#*********&/***%%#######&*&******************************************(#/**/@/@
@%#%(/**********&%########%*#(*********************************************%*/@
,#&#(%(*********/@#########%*(********************************************//,#@
@#***(#(*********/@##########,#******************************************(&*,%@
@@&*****%**********&&#######%(/%*****************************************/(,,&&
@@@%*****/%**********#@%####&/#(****************************************##,,%*@
@@@@%******&************&@##,##****************************************/%,,##/(
@@@@@&******&&*******************************************************//&,,(.#@@
@@@@@@@/****//*********************/%@%@&%##//******************/(*%/(#*,/@@@%@
@@@@@@@@@(***(/***************/#@@#%#&&(*/***/**/#%@@@#****/&*#&(%/%(((,*@@@@@@
@@@@@@@@@@@&#*******/#%****#@&%%/#***/(#&&%(***********,,,,,*%@((&/&#/*,@@@,&@@
@@@@@@&@@@@@@/**(&%*****#%&&&%#//************************,,,,,,*@&/&&/,%@@@@@@@
Snap...
  "
else
  puts "Maybe try putting the gauntlet on. Use --help for more details."
end
